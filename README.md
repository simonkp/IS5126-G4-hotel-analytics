# IS5126 G4 – Hotel Analytics

**Course:** IS5126 Hands-on with Applied Analytics  
**Assignment:** Group Assignment (Assignment 1: Data Foundation & Exploratory Analytics
**Business context:** HospitalityTech Solutions – analytics platform for hotel managers

---

## Repository structure 

```
IS5126-G4-hotel-analytics/
├── README.md                 # This file – setup and usage
├── requirements.txt          # Python 3.10+ dependencies
├── .gitignore
├── .env.example              # Copy to .env and set paths if needed
├── data/
│   ├── reviews_sample.db    # SQLite with 5,000+ sample reviews (for TAs)
│   ├── data_schema.sql      # Schema documentation
│   └── review.json          # (not in repo – place locally; ~1.1GB)
├── notebooks/
│   ├── 01_data_preparation.ipynb
│   ├── 02_exploratory_analysis.ipynb
│   ├── 03_competitive_benchmarking.ipynb
│   └── 04_performance_profiling.ipynb
├── src/
│   ├── data_processing.py   # Full ETL (JSONL → SQLite) + sample DB build
│   ├── benchmarking.py     # Comparable groups, best practices, recommendations
│   └── utils.py             # DB connection, paths
├── app/
│   └── streamlit_app.py    # Dashboard (3–5 core features)
├── profiling/
│   ├── query_results.txt   # Query profiling (EXPLAIN QUERY PLAN)
│   └── code_profiling.txt   # Code profiling (cProfile)
└── reports/
    └── assignment1_report.pdf   # (submit separately)
```

---

## Data requirements 

- **Timeframe:** Latest 5 years available (date filtering in data prep / analysis).
- **Volume:** 50,000–80,000+ reviews after filtering (full ETL yields ~878K; filter or sample to meet requirement; sample DB has 5,000+ for TAs).
- **Storage:** SQLite (`data/reviews.db` full; `data/reviews_sample.db` sample).
- **Sample:** `data/reviews_sample.db` with 5,000+ reviews is included for TA testing.

---

## Prerequisites

- Python 3.8+ 
- For full ETL: place `review.json` (JSONL, ~1.1GB) in `data/` (not in repo).

---

## Setup

```bash
python -m venv .venv
source .venv/bin/activate   # Windows: .venv\Scripts\activate
pip install -r requirements.txt
cp .env.example .env        # optional: edit REVIEW_JSON_PATH, DB_PATH, SAMPLE_DB_PATH
```

If you get `ModuleNotFoundError`, ensure the venv is activated or use `.venv/bin/python` for commands.

---

## Run order (reproducible)

### 1. Full ETL (if you have review.json)

```bash
python -m src.data_processing --full-etl
```

- Streams `data/review.json` line-by-line into `data/reviews.db`.
- Rerunnable: drops and recreates tables, then full re-import.

### 2. Sample DB (5,000+ reviews for TAs)  (optional, can be run from notebook)

```bash
python -m src.data_processing
```

- Requires `data/reviews.db` (from step 1).
- Creates `data/reviews_sample.db` with 5,000+ reviews (preferring latest 5 years).

### 3. Profiling outputs

- Run **notebook 04** (04_performance_profiling.ipynb). Its cells write `profiling/query_results.txt` and `profiling/code_profiling.txt` (assignment: profiling folder has only these two .txt files).

### 4. Notebooks

- Open `notebooks/01_data_preparation.ipynb` … `04_performance_profiling.ipynb` with Jupyter (kernel = project `.venv`).
- Run from project root so `src` and paths resolve.

### 5. Dashboard

```bash
streamlit run app/streamlit_app.py
```

- Uses `data/reviews_sample.db` if `data/reviews.db` is missing (e.g. for TAs).
- **Features:** (1) Overview & satisfaction drivers, (2) Hotel comparison, (3) Rating distribution, (4) Review volume by year, (5) Improvement opportunities (low cleanliness vs overall).

---

## Schema (data_schema.sql)

- **reviews:** id, offering_id, author_id, title, text, date, date_stayed, num_helpful_votes, via_mobile, rating_overall, rating_service, rating_cleanliness, rating_value, rating_location, rating_sleep_quality, rating_rooms.
- **authors:** id, username, location, num_cities, num_helpful_votes, num_reviews, num_type_reviews.
- Indexes: offering_id, author_id, rating_overall.

---

## Assignment 1 deliverables checklist 

- [x] Repo structure: README, requirements.txt, .gitignore, data/, notebooks/, src/, app/, profiling/, reports/
- [x] data/: reviews_sample.db (5,000+ reviews), data_schema.sql
- [x] notebooks/: 01_data_preparation, 02_exploratory_analysis, 03_competitive_benchmarking, 04_performance_profiling
- [x] src/: data_processing.py (full ETL + sample DB), benchmarking.py, utils.py
- [x] app/: streamlit_app.py (dashboard)
- [x] profiling/: query_results.txt, code_profiling.txt only (generated by running notebook 04)
- [x] reports/: assignment1_report.md (convert to PDF; submit on Canvas)
- [ ] assignment1_report.pdf (8–10 pages; submit on Canvas)

---

## Quick test (TA / no review.json)

If you only have the repo (no full `review.json`):

1. `pip install -r requirements.txt`
2. Use existing `data/reviews_sample.db` (5,000+ reviews).
3. Run notebooks 02–04 and `streamlit run app/streamlit_app.py` against the sample DB.
